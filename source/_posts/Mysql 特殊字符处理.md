---
title: Mysql 特殊字符过滤
tags: [mysql,特殊字符]
toc: true
---

## 背景
由于推送的数据不规范，接口上也没有进行数据格式校验，导致数据库中的字段存在了莫名的数据（业务端明显错误的数据），需要统计处理一下，
## 正则过滤
首先采用正则表达式进行过滤。Mysql中的正则表达式书写如下：
```
SELECT * FROM 表名 WHERE 列名  REGEXP '[^0-9a-zA-Z\\.[:blank:][:space:]\\/\\-]{1,}' 
```
其中`[^0-9a-zA-Z\\.[:blank:][:space:]\\/\\-]{1,}`为正则表达式。
### 匹配规则
| 模式        | 描述           | 
| ------------- |:-------------:| 
| ^             | 匹配输入字符串的开始位置。如果设置了 RegExp 对象的 Multiline 属性，^ 也匹配 '\n' 或 '\r' 之后的位置。      | 
| $             | 匹配输入字符串的结束位置。如果设置了RegExp 对象的 Multiline 属性，$ 也匹配 '\n' 或 '\r' 之前的位置。       |
| [...]         | 字符集合。匹配所包含的任意一个字符。例如， '[abc]' 可以匹配 "plain" 中的 'a'。                            | 
| [^...]        | 	负值字符集合。匹配未包含的任意字符。例如， '[^abc]' 可以匹配 "plain" 中的'p'。                          | 
| p1|p2|p3      | 	匹配 p1 或 p2 或 p3。例如，'z|food' 能匹配 "z" 或 "food"。'(z|f)ood' 则匹配 "zood" 或 "food"。        |
| *             | 	匹配前面的子表达式零次或多次。例如，zo* 能匹配 "z" 以及 "zoo"。* 等价于{0,}。                           | 
| +             | 	匹配前面的子表达式一次或多次。例如，'zo+' 能匹配 "zo" 以及 "zoo"，但不能匹配 "z"。+ 等价于 {1,}。        | 
| {n}           | n 是一个非负整数。匹配确定的 n 次。例如，'o{2}' 不能匹配 "Bob" 中的 'o'，但是能匹配 "food" 中的两个 o。    | 
| {n,m}         | m 和 n 均为非负整数，其中n <= m。最少匹配 n 次且最多匹配 m 次。                                          |  

### 特殊字符
`\\`是转义字符，如果需要匹配特殊字符需要加上转义字符。
| 模式        | 描述           | 
| ------------- |:-------------:| 
| \\f        | 换页           | 
| \\n         | 换行           | 
| \\r        | 回车           | 
| \\t        | 制表           | 
| \\v       | 纵向制表        |

一些特殊的匹配规则如下

| 模式        | 描述           | 
| ------------- |:-------------:| 
| [:alnum:]        |  文字数字字符           | 
| [:alpha:]         | 文字字符           | 
| [:blank:]        | 空白字符           | 
| [:cntrl:]       | 控制字符           | 
| [:digit:]      | 数字字符        |
| [:graph:]     | 图形字符        |
| [:lower:]      | 小写文字字符        |
| [:print:]     | 图形或空格字符        |
| [:punct:]       |  标点字符       |
| [space:]     | 包括空格在内的任意空白字符（同 [\\f\\n\\t\\r\\v]）        |
| [:upper:]    | 大写文字字符        |
| [:xdigit:]     | 任意十六进制数字（同 [a-fA-F0-9]）        |

## AscII查看
当发现特殊字符的时候，可以通过
```
SELECT ASCII(" ")
```
获得对应的ASCII码。
至于获得Unicode码的方式，还没有找到
